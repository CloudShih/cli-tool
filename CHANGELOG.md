# Changelog

All notable changes to CLI Tool project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [2.2.0] - 2025-01-08

### 🚀 Major Feature Addition - Ripgrep 文本搜尋工具

這是一個重要的功能版本，新增了強大的文本搜尋能力並修復了重要的主題顯示問題。

### Added

#### 🔎 Ripgrep 文本搜尋插件
- **全新插件**: 完整的 Ripgrep 超快文本搜尋工具整合
- **MVC 架構**: 遵循專案設計模式的完整實現 (Model-View-Controller)
- **高效能搜尋**: 支援正則表達式、全詞匹配、大小寫敏感等多種選項
- **智能結果解析**: JSON 格式輸出解析與結果統計聚合
- **非同步處理**: 避免 UI 凍結，提供流暢的搜尋體驗
- **完整測試套件**: 涵蓋功能、性能、跨平台、可用性測試

#### 🎨 用戶界面優化
- **垂直分列佈局**: 搜尋關鍵字、路徑、檔案類型分行排列，提升輸入體驗
- **歡迎頁面改進**: 新增滾動功能和 Ripgrep 工具卡片
- **插件載入優化**: 工具計數自動更新，正確顯示 6 個可用工具

#### 🌐 編碼支援改進
- **UTF-8 完整支援**: 解決 Windows 系統 cp950 編碼問題
- **中文內容搜尋**: 完美處理包含中文字符的文件搜尋
- **錯誤處理增強**: 優雅處理編碼錯誤和文件類型問題

### Fixed

#### 🎨 暗色主題修復
- **QTreeWidget 背景問題**: 徹底解決搜尋結果顯示區域白色背景問題
- **交替行顏色修復**: 關閉系統預設交替行顏色，確保透明背景一致性
- **完整狀態覆蓋**: 所有交互狀態 (selected, hover, focus, alternate) 正確顯示暗色主題

#### 🔧 系統穩定性改進  
- **動畫系統增強**: 改善動畫組錯誤處理，避免 QSequentialAnimationGroup 相關崩潰
- **檔案類型處理**: 優雅處理不存在的檔案類型，避免錯誤對話框

### Enhanced

#### 📚 文件和學習資源
- **Lesson Learn 文檔**: 新增詳細的問題解決過程記錄
  - PyQt5 佈局優化經驗
  - 暗色主題實施最佳實踐  
  - QTreeWidget 樣式問題解決方案
- **CLAUDE.md 更新**: 反映最新的工具架構和依賴關係
- **完整技術文檔**: 包含架構說明、測試策略、開發指南

#### 🔌 插件架構完善
- **標準化實現**: Ripgrep 插件完全遵循項目 MVC 架構標準
- **可重用組件**: 建立可供其他插件參考的實現模式
- **錯誤處理標準化**: 統一的錯誤處理和用戶反饋機制

### Technical Details

- **新增檔案**: 31 個新檔案，包含 8994+ 行高品質程式碼
- **測試覆蓋**: 完整的單元測試、整合測試、效能測試
- **代碼品質**: 遵循專案最佳實踐，包含詳細註釋和文檔
- **跨平台支援**: Windows、Linux、macOS 平台驗證

---

## [2.1.0] - 2025-08-04

### 🚀 Major Feature Addition - Pandoc 文檔轉換工具

這是一個重要的功能版本，新增了強大的文檔格式轉換能力。

### Added

#### 📄 Pandoc 文檔轉換插件
- **全新插件**: 完整的 Pandoc 萬能文檔轉換器整合
- **多格式支援**: 支援 10+ 種輸入格式和 12+ 種輸出格式
- **智能格式檢測**: 自動檢測輸入文檔格式
- **批量轉換**: 支援多文件同時轉換處理

#### 🎨 現代化使用者介面
- **分割式佈局**: 左側控制面板 + 右側結果顯示
- **多標籤顯示**: 轉換輸出、批量結果、使用說明三個標籤頁
- **進度指示**: 即時轉換進度和狀態回饋
- **檔案預過濾**: 智能識別不支援格式並提供建議

#### 🔧 進階功能配置
- **自訂模板**: 支援 HTML、LaTeX、Word 等模板格式
- **CSS 樣式**: HTML 輸出的自訂樣式支援
- **元數據設定**: 標題、作者、日期等文檔信息配置
- **Standalone 模式**: 生成包含完整樣式的獨立文檔

#### 🌐 中文和國際化支援
- **PDF 中文支援**: 自動配置 XeLaTeX 引擎和中文字體
- **編碼處理**: 完善的 UTF-8 編碼支援和錯誤處理
- **中文界面**: 完全中文化的使用者介面
- **字體優化**: Microsoft YaHei 等中文字體配置

#### 📖 完整使用說明系統
- **內建幫助**: 詳細的進階選項使用指南
- **實例範例**: 豐富的使用場景和範例展示
- **問題解決**: 常見問題和解決方案指導
- **最佳實踐**: 專業文檔製作建議

### Enhanced

#### 🔌 插件系統優化
- **工具檢測**: 完善的 Pandoc 工具可用性檢查
- **狀態管理**: 智能插件狀態顯示和管理
- **錯誤處理**: 友善的錯誤訊息和恢復建議

#### 🖥️ 使用者體驗改進
- **視窗大小**: 優化預設視窗尺寸以適應 Pandoc UI
- **響應式布局**: 智能的面板比例分配
- **載入動畫**: 插件載入過程的視覺反饋

### Fixed

#### 🐛 核心修復
- **插件可見性**: 修復 Pandoc 插件無法顯示的問題
- **編碼問題**: 解決 Windows 環境下的 Unicode 解碼錯誤
- **PDF 生成**: 修復中文字符 PDF 輸出問題
- **UI 布局**: 修復使用說明頁面顯示高度問題

#### 🔄 系統穩定性
- **記憶體管理**: 優化長時間運行的穩定性
- **資源清理**: 完善的臨時文件和資源清理
- **異常恢復**: 更好的異常情況處理和用戶提示

### Technical Highlights

#### 📊 支援格式清單
**輸入格式**: Markdown, HTML, Word, ODT, RTF, LaTeX, EPUB, reStructuredText, 純文字等
**輸出格式**: HTML, PDF, Word, ODT, LaTeX, EPUB, 簡報格式、Wiki 格式等

#### 🏗️ 架構特色
- **MVC 模式**: 完整的 Model-View-Controller 架構
- **異步處理**: 使用 QThread 的非阻塞轉換處理
- **配置持久化**: 用戶設定和偏好的自動保存
- **模組化設計**: 高度模組化的插件架構

#### 🧪 品質保證
- **全面測試**: 包含單元測試和整合測試
- **錯誤處理**: 完善的錯誤捕獲和用戶友善提示
- **效能優化**: 批量處理和記憶體使用優化
- **跨平台**: Windows 平台完整支援

### Developer Experience

#### 🛠️ 開發改進
- **代碼結構**: 清晰的 MVC 分離和模組化設計
- **文檔完善**: 詳細的 Lesson Learn 文檔和開發指南
- **版本控制**: 完整的 Git 提交歷史和版本追蹤

---

## [2.0.0] - 2025-07-31

### 🎉 Major Release - 架構全面優化

這是一個重大版本更新，將 CLI Tool 從簡單的工具集合轉變為專業級桌面應用框架。

### Added

#### 🔧 配置管理系統
- 新增統一的配置管理器 (`config/config_manager.py`)
- 支援 JSON 配置文件 (`config/cli_tool_config.json`)
- 智能路徑處理，支援開發和 PyInstaller 打包環境
- 配置持久化和用戶設定記憶

#### 🔌 插件式架構
- 實現插件接口基類 (`core/plugin_manager.py`)
- 自動插件發現和載入機制
- 工具可用性智能檢測
- 插件生命週期管理

#### 📦 打包和部署系統
- 完整的 PyInstaller 配置 (`cli_tool.spec`)
- 自動化打包腳本 (`build.py`)
- 依賴管理 (`requirements.txt`, `requirements-dev.txt`)
- 安裝配置 (`setup.py`)

#### 🎨 用戶體驗增強
- 智能錯誤提示和處理
- 窗口狀態記憶功能
- 插件狀態檢測和反饋
- 完整的日誌記錄系統

#### 🧪 測試和驗證
- 優化驗證腳本 (`test_optimizations.py`, `test_simple.py`)
- 應用程式功能測試 (`test_app.py`)
- 單元測試擴展

#### 📖 完整文檔體系
- 詳細的 README.md 和使用指南
- 插件開發文檔
- CLAUDE.md 開發指南
- 版本記錄 (CHANGELOG.md)

### Changed

#### 🏗️ 架構重構
- 將 fd 和 poppler 工具重構為插件
- 統一使用絕對匯入，修復 PyInstaller 兼容性
- 主應用程式採用插件驅動架構

#### 🔄 代碼改進
- 外部工具路徑配置化
- 錯誤處理機制標準化
- 資源管理最佳化

### Fixed

#### 🐛 Bug 修復
- 修復相對匯入導致的 PyInstaller 打包問題
- 修復硬編碼路徑問題
- 修復缺少依賴管理的問題

### Technical Details

#### 📁 新增文件結構
```
├── config/                  # 配置管理系統
│   ├── config_manager.py
│   └── cli_tool_config.json
├── core/                    # 核心框架
│   └── plugin_manager.py
├── tools/                   # 工具插件
│   ├── fd/plugin.py
│   └── poppler/plugin.py
├── build.py                 # 自動化打包
├── cli_tool.spec           # PyInstaller 配置
├── run.py                  # 開發者啟動腳本
└── test_*.py               # 測試腳本
```

#### 🔧 技術改進
- **插件接口**: 標準化的 `PluginInterface` 基類
- **配置系統**: 支援開發/生產環境的智能配置管理
- **資源處理**: `get_resource_path()` 統一資源路徑處理
- **錯誤處理**: 全域錯誤捕獲和用戶友好提示

#### 📊 品質指標
- **測試覆蓋**: 6/6 測試項目全部通過
- **代碼質量**: 從腳本級提升到框架級
- **文檔完整性**: 包含開發、使用和部署文檔
- **可維護性**: 模組化設計，易於擴展和修改

### Migration Guide

#### 從 v1.x 升級到 v2.0
1. **配置遷移**: 舊的硬編碼設定需遷移到 `config/cli_tool_config.json`
2. **啟動方式**: 建議使用 `cli-tool` 指令作為統一入口
3. **依賴安裝**: 執行 `pip install -r requirements.txt`
4. **功能驗證**: 運行 `python test_simple.py` 驗證升級結果

#### 開發者注意事項
- 所有匯入改為絕對匯入
- 插件開發需實現 `PluginInterface`
- 配置訪問統一使用 `config_manager`

---

## [1.0.0] - Initial Release

### Added
- 基本的 fd 文件搜尋功能
- Poppler PDF 處理工具整合
- PyQt5 圖形界面
- 基本的 MVC 架構