# Glances 插件 Phase 1 手動驗證流程

## 概述
此文件提供詳細的手動測試流程，用於驗證 Glances 系統監控插件 Phase 1 的所有功能組件。

## 前置準備

### 1. 環境檢查
```bash
# 檢查 Python 環境
python --version  # 應顯示 Python 3.x

# 檢查必要套件
python -c "import PyQt5; print('PyQt5 OK')"
python -c "import psutil; print('psutil OK')"

# 檢查 Glances 安裝（可選）
glances --version
```

### 2. 啟動主應用程式
```bash
cd D:\ClaudeCode\projects\cli_tool
python main_app.py
```

---

## 階段 1：基礎功能驗證

### 1.1 應用程式啟動測試
**操作步驟：**
1. 執行 `python main_app.py`
2. 查看主應用程式是否正常啟動
3. 檢查是否有 "Glances" 標籤頁

**預期結果：**
- ✅ 應用程式視窗正常開啟
- ✅ 可以看到 "Glances" 標籤頁
- ✅ 點擊 Glances 標籤頁能正常切換

**可能問題：**
- 如果沒有 Glances 標籤：檢查插件是否正確安裝
- 如果啟動錯誤：檢查 Python 路徑和依賴

### 1.2 插件初始化測試
**操作步驟：**
1. 點擊 "Glances" 標籤頁
2. 觀察載入過程和初始化訊息

**預期結果：**
- ✅ 標題顯示 "Glances - 系統資源監控"
- ✅ 可以看到 "🚀 開始監控" 和 "🔄 重新整理" 按鈕
- ✅ 狀態指示器顯示當前連接狀態

**驗證要點：**
- 查看控制台日誌是否有錯誤訊息
- 確認 UI 元素正確載入

---

## 階段 2：數據獲取驗證

### 2.1 系統概覽數據測試
**操作步驟：**
1. 點擊 "🔄 重新整理" 按鈕
2. 觀察系統概覽面板的數據更新

**預期結果：**
- ✅ CPU 使用率顯示實際百分比（如：15.3%）
- ✅ CPU 進度條顯示對應的視覺指示
- ✅ 記憶體使用顯示格式 "已用 / 總計 GB"
- ✅ 記憶體進度條反映使用百分比
- ✅ 負載平均值顯示系統負載
- ✅ 磁碟 I/O 顯示讀寫速率
- ✅ 網路顯示上行/下行數據

**驗證標準：**
- 數據應為實際系統數值，非模擬數據
- 進度條應與百分比數值一致
- 重新整理後數據應有微小變化

### 2.2 連接狀態驗證
**操作步驟：**
1. 觀察右上角配置面板的狀態指示器
2. 檢查底部狀態欄的連接狀態

**預期結果：**
- ✅ 狀態指示器顯示 "● 線上" 或 "● 離線"
- ✅ 底部狀態欄顯示連接模式（API 或 subprocess）
- ✅ 狀態文字與實際連接情況一致

---

## 階段 3：監控功能驗證

### 3.1 實時監控測試
**操作步驟：**
1. 點擊 "🚀 開始監控" 按鈕
2. 觀察按鈕變化和數據更新

**預期結果：**
- ✅ 按鈕文字變為 "⏹ 停止監控"
- ✅ 按鈕顏色變為紅色
- ✅ 系統數據每秒自動更新
- ✅ 狀態欄顯示 "監控中..."

**持續觀察（30秒）：**
- 數據持續更新且合理變化
- UI 響應正常，無卡頓
- 記憶體使用穩定，無明顯洩漏

### 3.2 監控停止測試
**操作步驟：**
1. 點擊 "⏹ 停止監控" 按鈕
2. 確認監控已停止

**預期結果：**
- ✅ 按鈕恢復為 "🚀 開始監控"
- ✅ 按鈕顏色恢復為綠色
- ✅ 數據更新停止
- ✅ 狀態欄顯示 "監控已停止"

---

## 階段 4：配置功能驗證

### 4.1 更新間隔設定測試
**操作步驟：**
1. 找到 "更新間隔" 設定（右上角配置面板）
2. 將數值從 1000ms 改為 2000ms
3. 開始監控並觀察更新頻率

**預期結果：**
- ✅ 數值可以正常調整（500-10000ms 範圍）
- ✅ 監控時數據更新頻率符合設定值
- ✅ 設定立即生效

### 4.2 Glances 服務器控制測試
**操作步驟：**
1. 檢查端口設定（默認 61208）
2. 點擊 "啟動 Web 服務器" 按鈕
3. 觀察結果訊息

**預期結果：**
- ✅ 端口數值可調整（1024-65535）
- ✅ 點擊按鈕有回應（成功或失敗訊息）
- ✅ 如果 Glances 已安裝，應顯示啟動成功
- ✅ 如果 Glances 未安裝，應顯示相應錯誤

---

## 階段 5：詳細監控標籤驗證

### 5.1 進程監控標籤測試
**操作步驟：**
1. 點擊底部 "進程監控" 標籤
2. 開始監控並觀察進程表格

**預期結果：**
- ✅ 表格顯示系統進程列表
- ✅ 欄位包含：PID、進程名稱、CPU%、記憶體%、狀態、命令行
- ✅ 進程按 CPU 使用率排序
- ✅ 數據動態更新

**驗證要點：**
- 進程數據應為真實系統進程
- CPU 和記憶體百分比應合理
- 表格可滾動查看更多進程

### 5.2 磁碟空間標籤測試
**操作步驟：**
1. 點擊 "磁碟空間" 標籤
2. 檢查磁碟使用情況顯示

**預期結果：**
- ✅ 表格顯示磁碟分區資訊
- ✅ 包含：磁碟、總容量、已使用、可用空間、使用率%
- ✅ 數據反映實際磁碟使用情況

### 5.3 網路詳情標籤測試
**操作步驟：**
1. 點擊 "網路詳情" 標籤
2. 觀察網路介面資訊

**預期結果：**
- ✅ 顯示網路介面統計
- ✅ 包含：介面、接收/發送數據量、速率、狀態
- ✅ 數據更新反映網路活動

### 5.4 原始數據標籤測試
**操作步驟：**
1. 點擊 "原始數據" 標籤
2. 查看 JSON 格式的原始監控數據

**預期結果：**
- ✅ 顯示深色背景的文字區域
- ✅ 內容為格式化的 JSON 數據
- ✅ 包含 cpu、mem、diskio、network、processes 等key
- ✅ 數據結構合理且可讀

---

## 階段 6：錯誤處理驗證

### 6.1 異常情況測試
**操作步驟：**
1. 在監控運行時，嘗試快速切換標籤
2. 快速開始/停止監控多次
3. 調整更新間隔到極值（500ms 和 10000ms）

**預期結果：**
- ✅ UI 保持響應，無卡死現象
- ✅ 數據更新正常，無異常錯誤
- ✅ 記憶體使用穩定

### 6.2 長時間運行測試
**操作步驟：**
1. 開始監控並運行 5-10 分鐘
2. 期間切換不同標籤頁
3. 觀察性能和穩定性

**預期結果：**
- ✅ 程式持續穩定運行
- ✅ 記憶體使用無明顯增長
- ✅ CPU 使用率合理
- ✅ 數據持續準確更新

---

## 階段 7：關閉清理驗證

### 7.1 正常關閉測試
**操作步驟：**
1. 停止監控
2. 關閉 Glances 標籤頁或整個應用程式
3. 檢查後台進程

**預期結果：**
- ✅ 監控線程正確停止
- ✅ 無殭屍進程殘留
- ✅ 應用程式完全退出

---

## 驗證總結報告模板

### 測試環境
- 作業系統：Windows [版本]
- Python 版本：[版本]
- 測試時間：[日期時間]
- Glances 版本：[如有安裝]

### 測試結果摘要
```
□ 基礎功能：通過/失敗
□ 數據獲取：通過/失敗  
□ 實時監控：通過/失敗
□ 配置功能：通過/失敗
□ 詳細標籤：通過/失敗
□ 錯誤處理：通過/失敗
□ 關閉清理：通過/失敗
```

### 發現的問題
1. [問題描述]
   - 重現步驟：
   - 預期行為：
   - 實際行為：

### 性能指標
- 啟動時間：[秒]
- 記憶體使用：[MB]
- CPU 使用率：[%]
- 響應延遲：[毫秒]

### 建議改進
1. [改進建議]
2. [優化方向]

---

## 快速驗證指令

如果時間有限，可以使用以下快速驗證步驟：

```bash
# 1. 快速功能測試
cd D:\ClaudeCode\projects\cli_tool
python test_glances_phase1.py

# 2. 手動啟動驗證
python main_app.py
# 然後依序：
# - 點擊 Glances 標籤
# - 點擊重新整理
# - 開始監控 30 秒
# - 切換各個監控標籤
# - 停止監控
# - 關閉應用
```

## 故障排除

### 常見問題及解決方案

**問題：應用程式無法啟動**
- 檢查 Python 和 PyQt5 安裝
- 確認工作目錄正確

**問題：無數據顯示**
- 檢查 psutil 模組是否安裝
- 查看控制台錯誤訊息

**問題：UI 卡頓**
- 檢查系統資源使用
- 調整更新間隔到較大值

**問題：資料不準確**
- 確認使用的是直接系統調用模式
- 檢查系統權限

---

**注意事項：**
- 建議在不同負載情況下測試（空閒、中度、高負載）
- 記錄任何異常行為或性能問題
- 測試時建議同時開啟工作管理員對照驗證數據準確性